.SECONDARY: main-build

all: pre-build main-build

pre-build:
	mkdir -p /var/www/html/maas-offline/maas-vanilla/images
	mkdir -p /var/www/html/maas-offline/maas-ui-only/images
	mkdir -p /var/www/html/maas-offline/maas-cli-only/images
	mkdir -p /var/www/html/maas-vanilla/images
	mkdir -p /var/www/html/maas-ui-only/images
	mkdir -p /var/www/html/maas-cli-only/images

post-build:
	xpub push github
	cp images/* /var/www/html/maas-offline/maas-vanilla/images
	cp images/* /var/www/html/maas-offline/maas-ui-only/images
	cp images/* /var/www/html/maas-offline/maas-cli-only/images
	cp images/* /var/www/html/maas-vanilla/images
	cp images/* /var/www/html/maas-ui-only/images
	cp images/* /var/www/html/maas-cli-only/images

%.html: %.md
	cp templates/vanilla-template.html ./template.html
	xpub convert dc2html - vanilla $<
	cp $@ /var/www/html/maas-vanilla
	mv $@ /var/www/html/maas-offline/maas-vanilla
	cp templates/ui-only-template.html ./template.html
	xpub convert dc2html -t ui $<
	cp $@ /var/www/html/maas-ui-only
	mv $@ /var/www/html/maas-offline/maas-ui-only
	cp templates/cli-only-template.html ./template.html
	xpub convert dc2html -t cli $<
	cp $@ /var/www/html/maas-cli-only
	cp $@ /var/www/html/maas-offline/maas-cli-only
	@$(MAKE) --no-print-directory post-build

main-build: %.html

pull:
	xpub pull discourse -c 5 -b not-rad 25 25
	xpub pull discourse -c 5 -b not-rad 742 742
	xpub pull discourse -c 5 -b not-rad 743 743
	xpub pull discourse -c 5 -b not-rad 745 745
	xpub pull discourse -c 5 -b not-rad 747 747
	xpub pull discourse -c 5 -b not-rad 749 749
	xpub pull discourse -c 5 -b not-rad 750 750
	xpub pull discourse -c 5 -b not-rad 751 751
	xpub pull discourse -c 5 -b not-rad 752 752
	xpub pull discourse -c 5 -b not-rad 753 753
	xpub pull discourse -c 5 -b not-rad 754 754
	xpub pull discourse -c 5 -b not-rad 757 757
	xpub pull discourse -c 5 -b not-rad 758 758
	xpub pull discourse -c 5 -b not-rad 759 759
	xpub pull discourse -c 5 -b not-rad 760 760
	xpub pull discourse -c 5 -b not-rad 761 761
	xpub pull discourse -c 5 -b not-rad 762 762
	xpub pull discourse -c 5 -b not-rad 763 763
	xpub pull discourse -c 5 -b not-rad 764 764
	xpub pull discourse -c 5 -b not-rad 765 765
	xpub pull discourse -c 5 -b not-rad 766 766
	xpub pull discourse -c 5 -b not-rad 768 768
	xpub pull discourse -c 5 -b not-rad 770 770
	xpub pull discourse -c 5 -b not-rad 771 771
	xpub pull discourse -c 5 -b not-rad 772 772
	xpub pull discourse -c 5 -b not-rad 773 773
	xpub pull discourse -c 5 -b not-rad 774 774
	xpub pull discourse -c 5 -b not-rad 775 775
	xpub pull discourse -c 5 -b not-rad 777 777
	xpub pull discourse -c 5 -b not-rad 778 778
	xpub pull discourse -c 5 -b not-rad 779 779
	xpub pull discourse -c 5 -b not-rad 780 780
	xpub pull discourse -c 5 -b not-rad 781 781
	xpub pull discourse -c 5 -b not-rad 783 783
	xpub pull discourse -c 5 -b not-rad 784 784
	xpub pull discourse -c 5 -b not-rad 785 785
	xpub pull discourse -c 5 -b not-rad 786 786
	xpub pull discourse -c 5 -b not-rad 787 787
	xpub pull discourse -c 5 -b not-rad 788 788
	xpub pull discourse -c 5 -b not-rad 789 789
	xpub pull discourse -c 5 -b not-rad 790 790
	xpub pull discourse -c 5 -b not-rad 791 791
	xpub pull discourse -c 5 -b not-rad 792 792
	xpub pull discourse -c 5 -b not-rad 793 793
	xpub pull discourse -c 5 -b not-rad 794 794
	xpub pull discourse -c 5 -b not-rad 795 795
	xpub pull discourse -c 5 -b not-rad 796 796
	xpub pull discourse -c 5 -b not-rad 797 797
	xpub pull discourse -c 5 -b not-rad 798 798
	xpub pull discourse -c 5 -b not-rad 799 799
	xpub pull discourse -c 5 -b not-rad 800 800
	xpub pull discourse -c 5 -b not-rad 801 801
	xpub pull discourse -c 5 -b not-rad 802 802
	xpub pull discourse -c 5 -b not-rad 803 803
	xpub pull discourse -c 5 -b not-rad 804 804
	xpub pull discourse -c 5 -b not-rad 806 806
	xpub pull discourse -c 5 -b not-rad 810 810
	xpub pull discourse -c 5 -b not-rad 813 813
	xpub pull discourse -c 5 -b not-rad 814 814
	xpub pull discourse -c 5 -b not-rad 819 819
	xpub pull discourse -c 5 -b not-rad 820 820
	xpub pull discourse -c 5 -b not-rad 821 821
	xpub pull discourse -c 5 -b not-rad 822 822
	xpub pull discourse -c 5 -b not-rad 824 824
	xpub pull discourse -c 5 -b not-rad 825 825
	xpub pull discourse -c 5 -b not-rad 826 826
	xpub pull discourse -c 5 -b not-rad 827 827
	xpub pull discourse -c 5 -b not-rad 828 828
	xpub pull discourse -c 5 -b not-rad 829 829
	xpub pull discourse -c 5 -b not-rad 830 830
	xpub pull discourse -c 5 -b not-rad 831 831
	xpub pull discourse -c 5 -b not-rad 832 832
	xpub pull discourse -c 5 -b not-rad 833 833
	xpub pull discourse -c 5 -b not-rad 834 834
	xpub pull discourse -c 5 -b not-rad 835 835
	xpub pull discourse -c 5 -b not-rad 836 836
	xpub pull discourse -c 5 -b not-rad 837 837
	xpub pull discourse -c 5 -b not-rad 838 838
	xpub pull discourse -c 5 -b not-rad 840 840
	xpub pull discourse -c 5 -b not-rad 1112 1112
	xpub pull discourse -c 5 -b not-rad 1267 1267
	xpub pull discourse -c 5 -b not-rad 1305 1305
	xpub pull discourse -c 5 -b not-rad 1306 1306
	xpub pull discourse -c 5 -b not-rad 1314 1314
	xpub pull discourse -c 5 -b not-rad 1381 1381
	xpub pull discourse -c 5 -b not-rad 1468 1468
	xpub pull discourse -c 5 -b not-rad 1478 1478
	xpub pull discourse -c 5 -b not-rad 1506 1506
	xpub pull discourse -c 5 -b not-rad 1524 1524
	xpub pull discourse -c 5 -b not-rad 1525 1525
	xpub pull discourse -c 5 -b not-rad 1526 1526
	xpub pull discourse -c 5 -b not-rad 1549 1549
	xpub pull discourse -c 5 -b not-rad 1652 1652
	xpub pull discourse -c 5 -b not-rad 1655 1655
	./clean-navigation.sh
